Return-Path: <linux-man+bounces-3450-lists+linux-man=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-man@lfdr.de
Delivered-To: lists+linux-man@lfdr.de
Received: from sv.mirrors.kernel.org (sv.mirrors.kernel.org [139.178.88.99])
	by mail.lfdr.de (Postfix) with ESMTPS id 8F156B27DD0
	for <lists+linux-man@lfdr.de>; Fri, 15 Aug 2025 12:04:45 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by sv.mirrors.kernel.org (Postfix) with ESMTPS id 81010AA5A74
	for <lists+linux-man@lfdr.de>; Fri, 15 Aug 2025 10:01:02 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id EC6B02FDC38;
	Fri, 15 Aug 2025 10:00:11 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b="Ope/PsNc"
X-Original-To: linux-man@vger.kernel.org
Received: from smtp.kernel.org (aws-us-west-2-korg-mail-1.web.codeaurora.org [10.30.226.201])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id AD0762FE046
	for <linux-man@vger.kernel.org>; Fri, 15 Aug 2025 10:00:11 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=10.30.226.201
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1755252011; cv=none; b=bP0RdlOQho7gwLZ2XDkbWdYhhgGvxr21pmeJqmhmNEqAeF6kphvowSRRLStmFARYn3qeaCSk50qhzkvj+gzTbPkmc1mM7wWbw1WoMyHEvs1afH2IDF/v1QxcJDYu5dMVaqBu/lvBivS5R9wAcERjqpfgMnCScBa9jJ7+0REW9n8=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1755252011; c=relaxed/simple;
	bh=e66fgyk04zCSMX6QuLYosJ7CQho1yMOb+15I/yas7OA=;
	h=Date:From:To:Cc:Subject:Message-ID:References:MIME-Version:
	 Content-Type:Content-Disposition:In-Reply-To; b=ElH0RjmKOggFQ8YUKJnmoDPCbI36UMTH/gGMWIIqjYGJZtakHqAXSjgXFDrtguInrb/ncuq2hex5rYxpRujlvCmZLBro426B4mUjzIUiJRLW9JQH3vkA6uXxcVL2F9RN4HcG6dt1zhPOwWUu5ry00TVKV7quJA6iwnJRJ6UkTfg=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b=Ope/PsNc; arc=none smtp.client-ip=10.30.226.201
Received: by smtp.kernel.org (Postfix) with ESMTPSA id 5E650C4CEEB;
	Fri, 15 Aug 2025 10:00:10 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
	s=k20201202; t=1755252011;
	bh=e66fgyk04zCSMX6QuLYosJ7CQho1yMOb+15I/yas7OA=;
	h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
	b=Ope/PsNcH6WmXVnU17MqBEvE71/4O6wP0IMgTIyhHfGnbRNu2IJAlHYDxsnNWTS1X
	 VNP0P8vKNV08YZWOf+3tX/9eUCx2t3kfe+JIl+YLdYlNnfTiG90bRjl3MrGhObXqGj
	 I+4mNzgKGaL/RZcsbkD/1XUe5q+Z5TRhkwD5BhJEiC5YGcqobN6uApKLtyila+N0Yu
	 g+Vj2BhtbaQvFkPhKbJtmu5LpL70+flpsz1Ai0D+SOBICmCdPtG9SzaKhCrG/UL5s9
	 gXmcFwoUKzkxrXn7iJpiN+Mm6zTn5liASWE/VrP+4GAJ1y7izgPgAFGz01XbR0TK1G
	 HUOfd7PB8da+w==
Date: Fri, 15 Aug 2025 12:00:07 +0200
From: Alejandro Colomar <alx@kernel.org>
To: "Klebsch, Mario" <Mario.Klebsch@ime-actia.de>
Cc: Radek Pazdera <rpazdera@redhat.com>, linux-man@vger.kernel.org
Subject: Re: AW: bug report: sendto(2) is missing EADDRNOTAVAIL
Message-ID: <43fewkvkd4vpovblgqzvusqclrl3o6dfpqasfu7ydmgmjos2x6@bnjmj3wwawhi>
References: <e885aaf5f35b44ceb76703067cc82639@ime-actia.de>
 <ozouxtgdqrp4ojymhcbd3hh337uuxvo3s2rzg5soa7lapibj4o@nlh4sqc2znui>
 <644bcb89d0714531b37ae6edb04102b8@ime-actia.de>
Precedence: bulk
X-Mailing-List: linux-man@vger.kernel.org
List-Id: <linux-man.vger.kernel.org>
List-Subscribe: <mailto:linux-man+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-man+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha512;
	protocol="application/pgp-signature"; boundary="w4gz7zjgcmpayivq"
Content-Disposition: inline
In-Reply-To: <644bcb89d0714531b37ae6edb04102b8@ime-actia.de>


--w4gz7zjgcmpayivq
Content-Type: text/plain; protected-headers=v1; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
From: Alejandro Colomar <alx@kernel.org>
To: "Klebsch, Mario" <Mario.Klebsch@ime-actia.de>
Cc: Radek Pazdera <rpazdera@redhat.com>, linux-man@vger.kernel.org
Subject: Re: AW: bug report: sendto(2) is missing EADDRNOTAVAIL
References: <e885aaf5f35b44ceb76703067cc82639@ime-actia.de>
 <ozouxtgdqrp4ojymhcbd3hh337uuxvo3s2rzg5soa7lapibj4o@nlh4sqc2znui>
 <644bcb89d0714531b37ae6edb04102b8@ime-actia.de>
MIME-Version: 1.0
In-Reply-To: <644bcb89d0714531b37ae6edb04102b8@ime-actia.de>

[CC +=3D linux-man@, Radek]

Hi Mario,

Please don't remove the mailing list.

On Fri, Aug 15, 2025 at 09:43:36AM +0000, Klebsch, Mario wrote:
> Hello Alex,
>=20
> >	ERRORS
> >	     These  are  some  standard  errors generated by the socket
> >	     layer.  Additional errors may be  generated  and  returned
> >	     from the underlying protocol modules; see their respective
> >	     manual pages.
>=20
> The man page of ip(7) in deed lists EADDRNOTAVAIL:
>=20
> >        EADDRNOTAVAIL
> >              A nonexistent interface was requested or the
> >              requested source address was not local.
>=20
> So it is not missing (as I thought) and my bug report can be rejected.

Thanks!

> But his explanation does not really help. The sddr parameter of the
> failed sendto() call is not a local address, but this is normal, when usi=
ng sendto(). Sendto()s intended usage is sending messages to remote systems.

I also found

     IP_UNBLOCK_SOURCE (since Linux 2.4.22 / 2.5.68)
            Unblock previously blocked multicast source.  Returns  EAD=E2=
=80=90
            DRNOTAVAIL when given source is not being blocked.

            Argument  is an ip_mreq_source structure as described under
            IP_ADD_SOURCE_MEMBERSHIP.

Maybe this helps?  I think this should be mentioned in ERRORS too.
I found it with the following:

	$ git blame -- man/man7/ip.7 | grep EADDRNOTAVAIL
	1ae6b2c7b8 man7/ip.7     (Alejandro Colomar      2022-03-18 20:25:09 +0100=
 1103) .B EADDRNOTAVAIL
	77117f4fc5 man7/ip.7     (Michael Kerrisk        2008-08-08 16:41:48 +0000=
 1351) .B EADDRNOTAVAIL
	$ git show 1ae6b2c7b8 -- man7/ip.7 | grep EADDRNOTAVAIL
	-.BR EADDRNOTAVAIL
	+.B EADDRNOTAVAIL
	$ git blame 1ae6b2c7b8^ -- man7/ip.7 | grep EADDRNOTAVAIL
	2a98c8e66d (Radek Pazdera          2013-02-10 03:33:27 +0100 1007) .BR EAD=
DRNOTAVAIL
	77117f4fc5 (Michael Kerrisk        2008-08-08 16:41:48 +0000 1253) .B EADD=
RNOTAVAIL

I've CCed Radek, who added the paragraph from above.

> To me it seems, the author of the description of EADDRNOTAVAIL had
> bind(2) failures in mind, when he wrote the descrition of this error
> code.
>=20
> > If it's an error of sendto(2) itself, would you mind sending a patch?
>=20
> I am unable to make a patch for you, because I do not know, what I
> shoud document. I read the man page just to find out, what the cause
> of the EADDRNOTAVAIL might be and how to halde this situation.

Have a lovely day!
Alex

--=20
<https://www.alejandro-colomar.es/>

--w4gz7zjgcmpayivq
Content-Type: application/pgp-signature; name="signature.asc"

-----BEGIN PGP SIGNATURE-----

iQIzBAABCgAdFiEES7Jt9u9GbmlWADAi64mZXMKQwqkFAmifBSEACgkQ64mZXMKQ
wqljaRAAiHKE29hUX1qBy8uuPx3atzqak7ToTI6n/oINYEUj67TiBL3R+VWnX305
ti5UEt3AbMe3I1QsedJyAFN/xW1mnLmUSayoTik9pYxYtYotjIol7FtjgU9pzwON
5gdeM/Tbr1hsqajtlPBV2phJ4DYpuj7OeUk2HTMNsgFGGB/B/gjFEpmHNY4WfCft
VtJy8/mFv4lUGSs4j3xhPaUpMKxLCPeH+CzheUhroLTEqQvoontySmQkm0/eIP8v
onjU43jRhi9Ho0gz9uAJMm5wBc42B50HKCTU1v7/RnJrViV63HWa8Ff3IQllbW4+
DVbYiFKgiDw/IVnI2+USD+ndubMMd6LmK+ik8tD81rt994fTw1Et0wFyY2mTORx9
OI1lfFTUe5KJkqZgZEtixSzFqvE8qhlfZV+HzSpkbLfz392jqYwfqu71dmmi8Bao
B1Mh3YYXIejOmSpgzbATqEicG+NZKD7NJllrv6I8+McARDQ9ZRzR1Vv/YVOxMPYA
0FeCRN9rIaS/HlbfNSMmUnZ5LKt7DF5pdzbtjLDbsxMtTuCPmeOnn9LdFfxluFXe
mDILj5IYldYsOchdpnK1E7bgAZe81xeSaWcJ/NMwWenolX7kQQI7vnI2jzGW3k8v
2MBfub2YwkuhtG3EkieM0lu+glP3canIi/9Bc/FVbwnT57Aprbo=
=zLbW
-----END PGP SIGNATURE-----

--w4gz7zjgcmpayivq--

